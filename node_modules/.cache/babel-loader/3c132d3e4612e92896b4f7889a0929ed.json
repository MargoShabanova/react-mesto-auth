{"ast":null,"code":"import _defineProperty from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{auth}from\"../utils/auth\";import InfoTooltip from\"./InfoTooltip\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(props){var history=useHistory();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState({isOpen:false,isSuccess:false}),_useState4=_slicedToArray(_useState3,2),isTooltip=_useState4[0],setIsTooltip=_useState4[1];function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},name,value)));}function handleSubmit(e){e.preventDefault();auth.signUp(userData).then(function(){setIsTooltip(_objectSpread(_objectSpread({},isTooltip),{},{isOpen:true,isSuccess:true}));}).catch(function(err){console.log(err);setIsTooltip(_objectSpread(_objectSpread({},isTooltip),{},{isOpen:true,isSuccess:false}));});}function handleCloseTooltip(){setIsTooltip(_objectSpread(_objectSpread({},isTooltip),{},{isOpen:false}));if(isTooltip.isSuccess){history.push('/sign-in');}}return/*#__PURE__*/_jsxs(\"main\",{className:\"auth\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form__title-auth\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",name:\"login\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form__container\",children:[/*#__PURE__*/_jsx(\"input\",{value:userData.email,onChange:handleChange,id:\"email\",name:\"email\",type:\"email\",className:\"form__item form__item_type_auth\",placeholder:\"Email\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"email-input-error form__item-error\"}),/*#__PURE__*/_jsx(\"input\",{value:userData.password,onChange:handleChange,id:\"password\",name:\"password\",type:\"password\",className:\"form__item form__item_type_auth\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"password-input-error form__item-error\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__submit_type_auth\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form__link-container\",children:/*#__PURE__*/_jsx(\"a\",{className:\"form__link\",href:\"/sing-in\",children:\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \\u0412\\u043E\\u0439\\u0442\\u0438\"})})]}),/*#__PURE__*/_jsx(InfoTooltip,{isOpen:isTooltip.isOpen,onClose:handleCloseTooltip,isSuccess:isTooltip.isSuccess})]});}","map":{"version":3,"names":["useState","auth","InfoTooltip","useHistory","Register","props","history","email","password","userData","setUserData","isOpen","isSuccess","isTooltip","setIsTooltip","handleChange","e","target","name","value","handleSubmit","preventDefault","signUp","then","catch","err","console","log","handleCloseTooltip","push"],"sources":["/Users/margaritasabanova/Documents/dev1/react-mesto-auth/src/components/Register.js"],"sourcesContent":["import { useState } from \"react\";\nimport { auth } from \"../utils/auth\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function Register(props) {\n  const history = useHistory();\n  const [userData, setUserData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [isTooltip, setIsTooltip] = useState({\n    isOpen: false,\n    isSuccess: false,\n  });\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n\n    setUserData({\n      ...userData,\n      [name]: value,\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    auth.signUp(userData)\n    .then(() => {\n      setIsTooltip({\n        ...isTooltip,\n        isOpen: true,\n        isSuccess: true\n      })\n    })\n    .catch((err) => {\n      console.log(err);\n      setIsTooltip({\n        ...isTooltip,\n        isOpen: true,\n        isSuccess: false\n      })\n    })\n  }\n\n  function handleCloseTooltip() {\n    setIsTooltip({\n      ...isTooltip,\n      isOpen: false,\n    });\n    if (isTooltip.isSuccess) {\n      history.push('/sign-in')\n    }\n  }\n\n  return (\n    <main className=\"auth\">\n      <h2 className=\"form__title-auth\">Регистрация</h2>\n      <form className=\"form\" name=\"login\" onSubmit={handleSubmit}>\n        <fieldset className=\"form__container\">\n          <input\n            value={userData.email}\n            onChange={handleChange}\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            className=\"form__item form__item_type_auth\"\n            placeholder=\"Email\"\n            required\n          />\n          <span className=\"email-input-error form__item-error\"></span>\n          <input\n            value={userData.password}\n            onChange={handleChange}\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            className=\"form__item form__item_type_auth\"\n            placeholder=\"Пароль\"\n            required\n          />\n          <span className=\"password-input-error form__item-error\"></span>\n        </fieldset>\n        <button type=\"submit\" className=\"form__submit_type_auth\">\n          Зарегистрироваться\n        </button>\n        <div className=\"form__link-container\">\n          <a className=\"form__link\" href=\"/sing-in\">\n            Уже зарегистрированы? Войти\n          </a>\n        </div>\n      </form>\n    <InfoTooltip isOpen={isTooltip.isOpen} onClose={handleCloseTooltip} isSuccess={isTooltip.isSuccess}/>\n    </main>\n  );\n}\n"],"mappings":"2aAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,IAAT,KAAqB,eAArB,CACA,MAAOC,YAAP,KAAwB,eAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,cAAe,SAASC,SAAT,CAAkBC,KAAlB,CAAyB,CACtC,GAAMC,QAAO,CAAGH,UAAU,EAA1B,CACA,cAAgCH,QAAQ,CAAC,CACvCO,KAAK,CAAE,EADgC,CAEvCC,QAAQ,CAAE,EAF6B,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eAKA,eAAkCV,QAAQ,CAAC,CACzCW,MAAM,CAAE,KADiC,CAEzCC,SAAS,CAAE,KAF8B,CAAD,CAA1C,yCAAOC,SAAP,eAAkBC,YAAlB,eAKA,QAASC,aAAT,CAAsBC,CAAtB,CAAyB,CACvB,cAAwBA,CAAC,CAACC,MAA1B,CAAQC,IAAR,WAAQA,IAAR,CAAcC,KAAd,WAAcA,KAAd,CAEAT,WAAW,gCACND,QADM,wBAERS,IAFQ,CAEDC,KAFC,GAAX,CAID,CAED,QAASC,aAAT,CAAsBJ,CAAtB,CAAyB,CACvBA,CAAC,CAACK,cAAF,GAEApB,IAAI,CAACqB,MAAL,CAAYb,QAAZ,EACCc,IADD,CACM,UAAM,CACVT,YAAY,gCACPD,SADO,MAEVF,MAAM,CAAE,IAFE,CAGVC,SAAS,CAAE,IAHD,GAAZ,CAKD,CAPD,EAQCY,KARD,CAQO,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAX,YAAY,gCACPD,SADO,MAEVF,MAAM,CAAE,IAFE,CAGVC,SAAS,CAAE,KAHD,GAAZ,CAKD,CAfD,EAgBD,CAED,QAASgB,mBAAT,EAA8B,CAC5Bd,YAAY,gCACPD,SADO,MAEVF,MAAM,CAAE,KAFE,GAAZ,CAIA,GAAIE,SAAS,CAACD,SAAd,CAAyB,CACvBN,OAAO,CAACuB,IAAR,CAAa,UAAb,EACD,CACF,CAED,mBACE,cAAM,SAAS,CAAC,MAAhB,wBACE,WAAI,SAAS,CAAC,kBAAd,gFADF,cAEE,cAAM,SAAS,CAAC,MAAhB,CAAuB,IAAI,CAAC,OAA5B,CAAoC,QAAQ,CAAET,YAA9C,wBACE,kBAAU,SAAS,CAAC,iBAApB,wBACE,cACE,KAAK,CAAEX,QAAQ,CAACF,KADlB,CAEE,QAAQ,CAAEQ,YAFZ,CAGE,EAAE,CAAC,OAHL,CAIE,IAAI,CAAC,OAJP,CAKE,IAAI,CAAC,OALP,CAME,SAAS,CAAC,iCANZ,CAOE,WAAW,CAAC,OAPd,CAQE,QAAQ,KARV,EADF,cAWE,aAAM,SAAS,CAAC,oCAAhB,EAXF,cAYE,cACE,KAAK,CAAEN,QAAQ,CAACD,QADlB,CAEE,QAAQ,CAAEO,YAFZ,CAGE,EAAE,CAAC,UAHL,CAIE,IAAI,CAAC,UAJP,CAKE,IAAI,CAAC,UALP,CAME,SAAS,CAAC,iCANZ,CAOE,WAAW,CAAC,sCAPd,CAQE,QAAQ,KARV,EAZF,cAsBE,aAAM,SAAS,CAAC,uCAAhB,EAtBF,GADF,cAyBE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,wBAAhC,0HAzBF,cA4BE,YAAK,SAAS,CAAC,sBAAf,uBACE,UAAG,SAAS,CAAC,YAAb,CAA0B,IAAI,CAAC,UAA/B,iKADF,EA5BF,GAFF,cAoCA,KAAC,WAAD,EAAa,MAAM,CAAEF,SAAS,CAACF,MAA/B,CAAuC,OAAO,CAAEiB,kBAAhD,CAAoE,SAAS,CAAEf,SAAS,CAACD,SAAzF,EApCA,GADF,CAwCD"},"metadata":{},"sourceType":"module"}