{"ast":null,"code":"import _objectSpread from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Auth);this.baseUrl=baseUrl;this.headers=headers;}_createClass(Auth,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}}},{key:\"signUp\",value:function signUp(email,password){return fetch(\"\".concat(this.baseUrl,\"/signup\"),{method:\"POST\",headers:this.headers,body:JSON.stringify({password:password,email:email})}).then(this._checkResponse).catch(function(err){return console.log(err);});}},{key:\"signIn\",value:function signIn(email,password){return fetch(\"\".concat(this.baseUrl,\"/signin\"),{method:\"POST\",headers:this.headers,body:JSON.stringify({password:password,email:email})}).then(this._checkResponse).then(function(data){if(data.user){localStorage.setItem('jwt',data.jwt);return data;}else{return;}}).catch(function(err){return console.log(err);});}},{key:\"getContent\",value:function getContent(token){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:\"GET\",headers:_objectSpread(_objectSpread({},this.headers),{},{Authorization:\"Bearer \".concat(token)})}).then(this._checkResponse).catch(function(err){return console.log(err);});}}]);return Auth;}();export var auth=new Auth({baseUrl:\"https://auth.nomoreparties.co\",headers:{\"Content-Type\":\"application/json\"}});","map":{"version":3,"names":["Auth","baseUrl","headers","res","ok","json","Promise","reject","status","email","password","fetch","method","body","JSON","stringify","then","_checkResponse","catch","err","console","log","data","user","localStorage","setItem","jwt","token","Authorization","auth"],"sources":["/Users/margaritasabanova/Documents/dev1/react-mesto-auth/src/utils/auth.js"],"sourcesContent":["class Auth {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  signUp( email, password ) {\n    return fetch(`${this.baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({ password, email }),\n    })\n      .then(this._checkResponse)\n      .catch(err => console.log(err));\n  }\n\n  signIn( email, password ) {\n    return fetch(`${this.baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({ password, email }),\n    })\n      .then(this._checkResponse)\n      .then((data) => {\n        if (data.user){\n          localStorage.setItem('jwt', data.jwt);\n          return data;\n        } else {\n          return;\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  getContent(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then(this._checkResponse)\n      .catch(err => console.log(err));\n  }\n}\n\nexport const auth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n"],"mappings":"0aAAMA,K,yBACJ,mBAAkC,IAApBC,QAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,4BAChC,KAAKD,OAAL,CAAeA,OAAf,CACA,KAAKC,OAAL,CAAeA,OAAf,CACD,C,+CAED,wBAAeC,GAAf,CAAoB,CAClB,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CAFD,IAEO,CACL,MAAOC,QAAO,CAACC,MAAR,iDAA0BJ,GAAG,CAACK,MAA9B,EAAP,CACD,CACF,C,sBAED,gBAAQC,KAAR,CAAeC,QAAf,CAA0B,CACxB,MAAOC,MAAK,WAAI,KAAKV,OAAT,YAA2B,CACrCW,MAAM,CAAE,MAD6B,CAErCV,OAAO,CAAE,KAAKA,OAFuB,CAGrCW,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEL,QAAQ,CAARA,QAAF,CAAYD,KAAK,CAALA,KAAZ,CAAf,CAH+B,CAA3B,CAAL,CAKJO,IALI,CAKC,KAAKC,cALN,EAMJC,KANI,CAME,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EANL,CAAP,CAOD,C,sBAED,gBAAQV,KAAR,CAAeC,QAAf,CAA0B,CACxB,MAAOC,MAAK,WAAI,KAAKV,OAAT,YAA2B,CACrCW,MAAM,CAAE,MAD6B,CAErCV,OAAO,CAAE,KAAKA,OAFuB,CAGrCW,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEL,QAAQ,CAARA,QAAF,CAAYD,KAAK,CAALA,KAAZ,CAAf,CAH+B,CAA3B,CAAL,CAKJO,IALI,CAKC,KAAKC,cALN,EAMJD,IANI,CAMC,SAACM,IAAD,CAAU,CACd,GAAIA,IAAI,CAACC,IAAT,CAAc,CACZC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4BH,IAAI,CAACI,GAAjC,EACA,MAAOJ,KAAP,CACD,CAHD,IAGO,CACL,OACD,CACF,CAbI,EAcJJ,KAdI,CAcE,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAdL,CAAP,CAeD,C,0BAED,oBAAWQ,KAAX,CAAkB,CAChB,MAAOhB,MAAK,WAAI,KAAKV,OAAT,cAA6B,CACvCW,MAAM,CAAE,KAD+B,CAEvCV,OAAO,gCACF,KAAKA,OADH,MAEL0B,aAAa,kBAAYD,KAAZ,CAFR,EAFgC,CAA7B,CAAL,CAOJX,IAPI,CAOC,KAAKC,cAPN,EAQJC,KARI,CAQE,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EARL,CAAP,CASD,C,oBAGH,MAAO,IAAMU,KAAI,CAAG,GAAI7B,KAAJ,CAAS,CAC3BC,OAAO,CAAE,+BADkB,CAE3BC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFkB,CAAT,CAAb"},"metadata":{},"sourceType":"module"}