{"ast":null,"code":"class Auth {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  signUp(email, password) {\n    return fetch(`${this.baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({\n        password,\n        email\n      })\n    }).then(this._checkResponse).catch(err => console.log(err));\n  }\n\n  signIn(email, password) {\n    return fetch(`${this.baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({\n        password,\n        email\n      })\n    }).then(this._checkResponse).then(data => {\n      if (data.jwt) {\n        localStorage.setItem('jwt', data.jwt);\n        return data;\n      } else {\n        return;\n      }\n    }).catch(err => console.log(err));\n  }\n\n  getContent(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: { ...this.headers,\n        Authorization: `Bearer ${token}`\n      }\n    }).then(this._checkResponse).catch(err => console.log(err));\n  }\n\n}\n\nexport const auth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});","map":{"version":3,"names":["Auth","constructor","baseUrl","headers","_checkResponse","res","ok","json","Promise","reject","status","signUp","email","password","fetch","method","body","JSON","stringify","then","catch","err","console","log","signIn","data","jwt","localStorage","setItem","getContent","token","Authorization","auth"],"sources":["/Users/margaritasabanova/Documents/dev1/react-mesto-auth/src/utils/auth.js"],"sourcesContent":["class Auth {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  signUp( email, password ) {\n    return fetch(`${this.baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({ password, email }),\n    })\n      .then(this._checkResponse)\n      .catch(err => console.log(err));\n  }\n\n  signIn( email, password ) {\n    return fetch(`${this.baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({ password, email }),\n    })\n      .then(this._checkResponse)\n      .then((data) => {\n        if (data.jwt){\n          localStorage.setItem('jwt', data.jwt);\n          return data;\n        } else {\n          return;\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  getContent(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then(this._checkResponse)\n      .catch(err => console.log(err));\n  }\n}\n\nexport const auth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n"],"mappings":"AAAA,MAAMA,IAAN,CAAW;EACTC,WAAW,OAAuB;IAAA,IAAtB;MAAEC,OAAF;MAAWC;IAAX,CAAsB;IAChC,KAAKD,OAAL,GAAeA,OAAf;IACA,KAAKC,OAAL,GAAeA,OAAf;EACD;;EAEDC,cAAc,CAACC,GAAD,EAAM;IAClB,IAAIA,GAAG,CAACC,EAAR,EAAY;MACV,OAAOD,GAAG,CAACE,IAAJ,EAAP;IACD,CAFD,MAEO;MACL,OAAOC,OAAO,CAACC,MAAR,CAAgB,WAAUJ,GAAG,CAACK,MAAO,EAArC,CAAP;IACD;EACF;;EAEDC,MAAM,CAAEC,KAAF,EAASC,QAAT,EAAoB;IACxB,OAAOC,KAAK,CAAE,GAAE,KAAKZ,OAAQ,SAAjB,EAA2B;MACrCa,MAAM,EAAE,MAD6B;MAErCZ,OAAO,EAAE,KAAKA,OAFuB;MAGrCa,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAEL,QAAF;QAAYD;MAAZ,CAAf;IAH+B,CAA3B,CAAL,CAKJO,IALI,CAKC,KAAKf,cALN,EAMJgB,KANI,CAMEC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANT,CAAP;EAOD;;EAEDG,MAAM,CAAEZ,KAAF,EAASC,QAAT,EAAoB;IACxB,OAAOC,KAAK,CAAE,GAAE,KAAKZ,OAAQ,SAAjB,EAA2B;MACrCa,MAAM,EAAE,MAD6B;MAErCZ,OAAO,EAAE,KAAKA,OAFuB;MAGrCa,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAEL,QAAF;QAAYD;MAAZ,CAAf;IAH+B,CAA3B,CAAL,CAKJO,IALI,CAKC,KAAKf,cALN,EAMJe,IANI,CAMEM,IAAD,IAAU;MACd,IAAIA,IAAI,CAACC,GAAT,EAAa;QACXC,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BH,IAAI,CAACC,GAAjC;QACA,OAAOD,IAAP;MACD,CAHD,MAGO;QACL;MACD;IACF,CAbI,EAcJL,KAdI,CAcEC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAdT,CAAP;EAeD;;EAEDQ,UAAU,CAACC,KAAD,EAAQ;IAChB,OAAOhB,KAAK,CAAE,GAAE,KAAKZ,OAAQ,WAAjB,EAA6B;MACvCa,MAAM,EAAE,KAD+B;MAEvCZ,OAAO,EAAE,EACP,GAAG,KAAKA,OADD;QAEP4B,aAAa,EAAG,UAASD,KAAM;MAFxB;IAF8B,CAA7B,CAAL,CAOJX,IAPI,CAOC,KAAKf,cAPN,EAQJgB,KARI,CAQEC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CART,CAAP;EASD;;AApDQ;;AAuDX,OAAO,MAAMW,IAAI,GAAG,IAAIhC,IAAJ,CAAS;EAC3BE,OAAO,EAAE,+BADkB;EAE3BC,OAAO,EAAE;IACP,gBAAgB;EADT;AAFkB,CAAT,CAAb"},"metadata":{},"sourceType":"module"}