{"ast":null,"code":"import _defineProperty from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/margaritasabanova/Documents/dev1/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{auth}from\"../utils/auth\";import InfoTooltip from\"./InfoTooltip\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(_ref){var handleLogin=_ref.handleLogin;var history=useHistory();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isTooltipOpen=_useState4[0],setIsTooltipOpen=_useState4[1];function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},name,value)));}function handleSubmit(e){e.preventDefault();if(!userData.email||!userData.password){return;}auth.signIn(userData.email,userData.password).then(function(data){if(data.token){localStorage.setItem(\"jwt\",data.token);setUserData({email:\"\",password:\"\"});handleLogin();history.push(\"/main\");}}).catch(function(err){console.log(err);setIsTooltipOpen(true);});}function handleCloseTooltip(){setIsTooltipOpen(false);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{className:\"auth\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form__title-auth\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"form\",{className:\"form\",name:\"login\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form__container\",children:[/*#__PURE__*/_jsx(\"input\",{value:userData.email,onChange:handleChange,id:\"email-input\",name:\"email\",type:\"email\",className:\"form__item form__item_type_auth\",placeholder:\"Email\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"email-input-error form__item-error\"}),/*#__PURE__*/_jsx(\"input\",{value:userData.password,onChange:handleChange,id:\"password\",name:\"password\",type:\"password\",className:\"form__item form__item_type_auth\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"password-input-error form__item-error\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__submit_type_auth\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})})]}),/*#__PURE__*/_jsx(InfoTooltip,{isOpen:isTooltipOpen,onClose:handleCloseTooltip,isSuccess:false})]});}","map":{"version":3,"names":["useState","useHistory","auth","InfoTooltip","Login","handleLogin","history","email","password","userData","setUserData","isTooltipOpen","setIsTooltipOpen","handleChange","e","target","name","value","handleSubmit","preventDefault","signIn","then","data","token","localStorage","setItem","push","catch","err","console","log","handleCloseTooltip"],"sources":["/Users/margaritasabanova/Documents/dev1/react-mesto-auth/src/components/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"../utils/auth\";\nimport InfoTooltip from \"./InfoTooltip\";\n\nexport default function Login({ handleLogin }) {\n  const history = useHistory();\n\n  const [userData, setUserData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [isTooltipOpen, setIsTooltipOpen] = useState(false);\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n\n    setUserData({\n      ...userData,\n      [name]: value,\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!userData.email || !userData.password) {\n      return;\n    }\n    auth\n      .signIn(userData.email, userData.password)\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"jwt\", data.token);\n          setUserData({\n            email: \"\",\n            password: \"\",\n          });\n          handleLogin();\n          history.push(\"/main\");\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsTooltipOpen(true);\n      });\n  }\n\n  function handleCloseTooltip() {\n    setIsTooltipOpen(false);\n  }\n\n  return (\n    <>\n      <main className=\"auth\">\n        <h2 className=\"form__title-auth\">Вход</h2>\n        <form className=\"form\" name=\"login\" onSubmit={handleSubmit}>\n          <fieldset className=\"form__container\">\n            <input\n              value={userData.email}\n              onChange={handleChange}\n              id=\"email-input\"\n              name=\"email\"\n              type=\"email\"\n              className=\"form__item form__item_type_auth\"\n              placeholder=\"Email\"\n              required\n            />\n            <span className=\"email-input-error form__item-error\"></span>\n            <input\n              value={userData.password}\n              onChange={handleChange}\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              className=\"form__item form__item_type_auth\"\n              placeholder=\"Пароль\"\n              required\n            />\n            <span className=\"password-input-error form__item-error\"></span>\n            <button type=\"submit\" className=\"form__submit_type_auth\">\n              Войти\n            </button>\n          </fieldset>\n        </form>\n      </main>\n      <InfoTooltip\n        isOpen={isTooltipOpen}\n        onClose={handleCloseTooltip}\n        isSuccess={false}\n      />\n    </>\n  );\n}\n"],"mappings":"2aAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,IAAT,KAAqB,eAArB,CACA,MAAOC,YAAP,KAAwB,eAAxB,C,6IAEA,cAAe,SAASC,MAAT,MAAgC,IAAfC,YAAe,MAAfA,WAAe,CAC7C,GAAMC,QAAO,CAAGL,UAAU,EAA1B,CAEA,cAAgCD,QAAQ,CAAC,CACvCO,KAAK,CAAE,EADgC,CAEvCC,QAAQ,CAAE,EAF6B,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eAKA,eAA0CV,QAAQ,CAAC,KAAD,CAAlD,yCAAOW,aAAP,eAAsBC,gBAAtB,eAEA,QAASC,aAAT,CAAsBC,CAAtB,CAAyB,CACvB,cAAwBA,CAAC,CAACC,MAA1B,CAAQC,IAAR,WAAQA,IAAR,CAAcC,KAAd,WAAcA,KAAd,CAEAP,WAAW,gCACND,QADM,wBAERO,IAFQ,CAEDC,KAFC,GAAX,CAID,CAED,QAASC,aAAT,CAAsBJ,CAAtB,CAAyB,CACvBA,CAAC,CAACK,cAAF,GAEA,GAAI,CAACV,QAAQ,CAACF,KAAV,EAAmB,CAACE,QAAQ,CAACD,QAAjC,CAA2C,CACzC,OACD,CACDN,IAAI,CACDkB,MADH,CACUX,QAAQ,CAACF,KADnB,CAC0BE,QAAQ,CAACD,QADnC,EAEGa,IAFH,CAEQ,SAACC,IAAD,CAAU,CACd,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4BH,IAAI,CAACC,KAAjC,EACAb,WAAW,CAAC,CACVH,KAAK,CAAE,EADG,CAEVC,QAAQ,CAAE,EAFA,CAAD,CAAX,CAIAH,WAAW,GACXC,OAAO,CAACoB,IAAR,CAAa,OAAb,EACD,CACF,CAZH,EAaGC,KAbH,CAaS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAhB,gBAAgB,CAAC,IAAD,CAAhB,CACD,CAhBH,EAiBD,CAED,QAASmB,mBAAT,EAA8B,CAC5BnB,gBAAgB,CAAC,KAAD,CAAhB,CACD,CAED,mBACE,wCACE,cAAM,SAAS,CAAC,MAAhB,wBACE,WAAI,SAAS,CAAC,kBAAd,sCADF,cAEE,aAAM,SAAS,CAAC,MAAhB,CAAuB,IAAI,CAAC,OAA5B,CAAoC,QAAQ,CAAEM,YAA9C,uBACE,kBAAU,SAAS,CAAC,iBAApB,wBACE,cACE,KAAK,CAAET,QAAQ,CAACF,KADlB,CAEE,QAAQ,CAAEM,YAFZ,CAGE,EAAE,CAAC,aAHL,CAIE,IAAI,CAAC,OAJP,CAKE,IAAI,CAAC,OALP,CAME,SAAS,CAAC,iCANZ,CAOE,WAAW,CAAC,OAPd,CAQE,QAAQ,KARV,EADF,cAWE,aAAM,SAAS,CAAC,oCAAhB,EAXF,cAYE,cACE,KAAK,CAAEJ,QAAQ,CAACD,QADlB,CAEE,QAAQ,CAAEK,YAFZ,CAGE,EAAE,CAAC,UAHL,CAIE,IAAI,CAAC,UAJP,CAKE,IAAI,CAAC,UALP,CAME,SAAS,CAAC,iCANZ,CAOE,WAAW,CAAC,sCAPd,CAQE,QAAQ,KARV,EAZF,cAsBE,aAAM,SAAS,CAAC,uCAAhB,EAtBF,cAuBE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,wBAAhC,4CAvBF,GADF,EAFF,GADF,cAiCE,KAAC,WAAD,EACE,MAAM,CAAEF,aADV,CAEE,OAAO,CAAEoB,kBAFX,CAGE,SAAS,CAAE,KAHb,EAjCF,GADF,CAyCD"},"metadata":{},"sourceType":"module"}