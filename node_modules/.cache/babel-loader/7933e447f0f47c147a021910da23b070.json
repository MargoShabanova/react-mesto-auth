{"ast":null,"code":"class Auth {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  signUp(_ref2) {\n    let {\n      email,\n      password\n    } = _ref2;\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._checkResponse).catch(err => console.log(err));\n  }\n\n  signIn(_ref3) {\n    let {\n      email,\n      password\n    } = _ref3;\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._checkResponse).then(data => {\n      if (data.user) {\n        localStorage.setItem('jwt', data.jwt);\n        return data;\n      } else {\n        return;\n      }\n    }).catch(err => console.log(err));\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: { ...this._headers,\n        Authorization: `Bearer ${token}`\n      }\n    }).then(this._checkResponse).catch(err => console.log(err));\n  }\n\n}\n\nexport const auth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});","map":{"version":3,"names":["Auth","constructor","baseUrl","headers","_baseUrl","_headers","_checkResponse","res","ok","json","Promise","reject","status","signUp","email","password","fetch","method","body","JSON","stringify","then","catch","err","console","log","signIn","data","user","localStorage","setItem","jwt","getContent","token","Authorization","auth"],"sources":["/Users/margaritasabanova/Documents/dev1/react-mesto-auth/src/utils/auth.js"],"sourcesContent":["class Auth {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  signUp({ email, password }) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email, password }),\n    })\n      .then(this._checkResponse)\n      .catch(err => console.log(err));\n  }\n\n  signIn({ email, password }) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email, password }),\n    })\n      .then(this._checkResponse)\n      .then((data) => {\n        if (data.user){\n          localStorage.setItem('jwt', data.jwt);\n          return data;\n        } else {\n          return;\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        ...this._headers,\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then(this._checkResponse)\n      .catch(err => console.log(err));\n  }\n}\n\nexport const auth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n"],"mappings":"AAAA,MAAMA,IAAN,CAAW;EACTC,WAAW,OAAuB;IAAA,IAAtB;MAAEC,OAAF;MAAWC;IAAX,CAAsB;IAChC,KAAKC,QAAL,GAAgBF,OAAhB;IACA,KAAKG,QAAL,GAAgBF,OAAhB;EACD;;EAEDG,cAAc,CAACC,GAAD,EAAM;IAClB,IAAIA,GAAG,CAACC,EAAR,EAAY;MACV,OAAOD,GAAG,CAACE,IAAJ,EAAP;IACD,CAFD,MAEO;MACL,OAAOC,OAAO,CAACC,MAAR,CAAgB,WAAUJ,GAAG,CAACK,MAAO,EAArC,CAAP;IACD;EACF;;EAEDC,MAAM,QAAsB;IAAA,IAArB;MAAEC,KAAF;MAASC;IAAT,CAAqB;IAC1B,OAAOC,KAAK,CAAE,GAAE,KAAKZ,QAAS,SAAlB,EAA4B;MACtCa,MAAM,EAAE,MAD8B;MAEtCd,OAAO,EAAE,KAAKE,QAFwB;MAGtCa,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAEN,KAAF;QAASC;MAAT,CAAf;IAHgC,CAA5B,CAAL,CAKJM,IALI,CAKC,KAAKf,cALN,EAMJgB,KANI,CAMEC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANT,CAAP;EAOD;;EAEDG,MAAM,QAAsB;IAAA,IAArB;MAAEZ,KAAF;MAASC;IAAT,CAAqB;IAC1B,OAAOC,KAAK,CAAE,GAAE,KAAKZ,QAAS,SAAlB,EAA4B;MACtCa,MAAM,EAAE,MAD8B;MAEtCd,OAAO,EAAE,KAAKE,QAFwB;MAGtCa,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAEN,KAAF;QAASC;MAAT,CAAf;IAHgC,CAA5B,CAAL,CAKJM,IALI,CAKC,KAAKf,cALN,EAMJe,IANI,CAMEM,IAAD,IAAU;MACd,IAAIA,IAAI,CAACC,IAAT,EAAc;QACZC,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BH,IAAI,CAACI,GAAjC;QACA,OAAOJ,IAAP;MACD,CAHD,MAGO;QACL;MACD;IACF,CAbI,EAcJL,KAdI,CAcEC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAdT,CAAP;EAeD;;EAEDS,UAAU,CAACC,KAAD,EAAQ;IAChB,OAAOjB,KAAK,CAAE,GAAE,KAAKZ,QAAS,WAAlB,EAA8B;MACxCa,MAAM,EAAE,KADgC;MAExCd,OAAO,EAAE,EACP,GAAG,KAAKE,QADD;QAEP6B,aAAa,EAAG,UAASD,KAAM;MAFxB;IAF+B,CAA9B,CAAL,CAOJZ,IAPI,CAOC,KAAKf,cAPN,EAQJgB,KARI,CAQEC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CART,CAAP;EASD;;AApDQ;;AAuDX,OAAO,MAAMY,IAAI,GAAG,IAAInC,IAAJ,CAAS;EAC3BE,OAAO,EAAE,+BADkB;EAE3BC,OAAO,EAAE;IACP,gBAAgB;EADT;AAFkB,CAAT,CAAb"},"metadata":{},"sourceType":"module"}